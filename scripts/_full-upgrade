#!/bin/sh

# Author: Rick Balocca
# Date: 2007
# Description:

case "$1" in
-r)	
	# then finish the upgrade in unattended mode
	xes /opt/vyatta/bin/install-only && xes /opt/vyatta/bin/remove-packages
	;;
-k)
	# then finish the upgrade in unattended mode
	xes /opt/vyatta/bin/install-only
	;;
-i)
	install-only && exec remove-packages
	;;
esac
ret=$?
if [ $ret -eq 0 ]
then
	sleep 20
	reboot
else
	echo **** Upgrade terminated early
	echo **** run dpkg -l to determine
	echo **** the state of the packages
	echo **** on your system.
	exit 1
fi
