#!/bin/sh

# Author: Rick Balocca
# Date: 2007
# Description:

PATH=/opt/vyatta/bin:$PATH

check-upgrade

case "$1" in
-u|"")	
	# first do the download:
	download-only

	# then finish the upgrade in unattended mode
	echo "Please wait.  Now entering unattended mode."
	echo "This will take a long time.  When done,"
	echo "the system will automatically reboot."
	(xes /opt/vyatta/bin/install-only;xes /opt/vyatta/bin/remove-packages)
	;;
-x)
	download-only
	install-only
	;;
-c)
	download-only
	install-only -c
	remove-packages -c
	;;
esac

rm -rf /tmp/full-upgrade
