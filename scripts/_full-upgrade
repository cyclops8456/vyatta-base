#!/bin/sh

# Author: Rick Balocca
# Date: 2007
# Description:

case "$1" in
-u|"")	
	# then finish the upgrade in unattended mode
	xes /opt/vyatta/bin/install-only && xes /opt/vyatta/bin/remove-packages
	;;
-x)
	# then finish the upgrade in unattended mode
	xes /opt/vyatta/bin/install-only
	;;
-c)
	install-only && exec remove-packages
	;;
esac
ret=$?
if [ $ret -eq 0 ]
then
	sleep 20
	reboot
else
	echo **** Upgrade terminated early
	echo **** run dpkg -l to determine
	echo **** the state of your system's
	echo **** packages.
	exit 1
fi
